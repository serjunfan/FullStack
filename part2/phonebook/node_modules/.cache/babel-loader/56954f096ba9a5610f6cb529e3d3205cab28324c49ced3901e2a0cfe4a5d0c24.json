{"ast":null,"code":"import _slicedToArray from\"/home/luinpin/fullstack/part2/phonebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import phoneBookService from'./services/phonebooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Display=function Display(props){var person=props.person,shouldReRender=props.shouldReRender,setShouldReRender=props.setShouldReRender;var name=person.name,phoneNum=person.phoneNum,id=person.id;var deleteHandler=function deleteHandler(name){if(window.confirm(\"Delete \".concat(name,\" ?\")))phoneBookService.deletePerson(id).then(function(returnStatus){return returnStatus===200?setShouldReRender(!shouldReRender):console.log('sth wrong');});};return/*#__PURE__*/_jsxs(_Fragment,{children:[name,\" \",phoneNum,\" \",/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteHandler(name);},children:\"delete\"}),/*#__PURE__*/_jsx(\"br\",{})]});};var Filter=function Filter(_ref){var filterName=_ref.filterName,setFilterName=_ref.setFilterName;return/*#__PURE__*/_jsxs(_Fragment,{children:[\"filter shown with: \",/*#__PURE__*/_jsx(\"input\",{value:filterName,onChange:function onChange(event){return setFilterName(event.target.value);}})]});};var Persons=function Persons(_ref2){var personsToShow=_ref2.personsToShow,shouldReRender=_ref2.shouldReRender,setShouldReRender=_ref2.setShouldReRender;return/*#__PURE__*/_jsx(\"div\",{children:personsToShow.map(function(person){return/*#__PURE__*/_jsx(Display,{person:person,shouldReRender:shouldReRender,setShouldReRender:setShouldReRender},person.name);})});};var PersonForm=function PersonForm(props){var addPersonAndPhoneNum=props.addPersonAndPhoneNum,newName=props.newName,setNewName=props.setNewName,newPhoneNum=props.newPhoneNum,setNewPhoneNum=props.setNewPhoneNum;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:addPersonAndPhoneNum,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"name: \",/*#__PURE__*/_jsx(\"input\",{value:newName,onChange:function onChange(event){return setNewName(event.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),\"number: \",/*#__PURE__*/_jsx(\"input\",{value:newPhoneNum,onChange:function onChange(event){return setNewPhoneNum(event.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})})]});};var Notification=function Notification(_ref3){var message=_ref3.message;var NotificationStyle={color:'green',background:'lightgrey',fontSize:'20px',fontStyle:'italic'};if(message===null){return null;}return/*#__PURE__*/_jsx(\"div\",{style:NotificationStyle,children:message});};var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),shouldReRender=_useState4[0],setShouldReRender=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newName=_useState6[0],setNewName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newPhoneNum=_useState8[0],setNewPhoneNum=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),filterName=_useState10[0],setFilterName=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),addMessage=_useState12[0],setAddMessage=_useState12[1];useEffect(function(){phoneBookService.getAll().then(function(initialPersons){setPersons(initialPersons);});},[shouldReRender]);var addPersonAndPhoneNum=function addPersonAndPhoneNum(event){event.preventDefault();persons.forEach(function(element){if(element.name===newName&&element.phoneNum===newPhoneNum)alert(\"\".concat(newName,\" & \").concat(newPhoneNum,\" is already added to phonebook\"));});var newPerson={name:newName,phoneNum:newPhoneNum};phoneBookService.create(newPerson).then(function(newPerson){setAddMessage(\"Added \".concat(newName));setTimeout(function(){return setAddMessage(null);},3000);setPersons(persons.concat(newPerson));setNewName('');setNewPhoneNum('');});};var personsToShow=filterName===''?persons:persons.filter(function(person){return person.name===filterName;});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:addMessage}),/*#__PURE__*/_jsx(Filter,{filterName:filterName,setFilterName:setFilterName}),/*#__PURE__*/_jsx(PersonForm,{addPersonAndPhoneNum:addPersonAndPhoneNum,newName:newName,setNewName:setNewName,newPhoneNum:newPhoneNum,setNewPhoneNum:setNewPhoneNum}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{personsToShow:personsToShow,shouldReRender:shouldReRender,setShouldReRender:setShouldReRender})]});};export default App;","map":{"version":3,"names":["useState","useEffect","phoneBookService","Display","props","person","shouldReRender","setShouldReRender","name","phoneNum","id","deleteHandler","window","confirm","deletePerson","then","returnStatus","console","log","Filter","filterName","setFilterName","event","target","value","Persons","personsToShow","map","PersonForm","addPersonAndPhoneNum","newName","setNewName","newPhoneNum","setNewPhoneNum","Notification","message","NotificationStyle","color","background","fontSize","fontStyle","App","persons","setPersons","addMessage","setAddMessage","getAll","initialPersons","preventDefault","forEach","element","alert","newPerson","create","setTimeout","concat","filter"],"sources":["/home/luinpin/fullstack/part2/phonebook/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport phoneBookService from './services/phonebooks'\n\nconst Display = (props) => {\n  const {person, shouldReRender, setShouldReRender} = props\n  const {name, phoneNum, id} = person\n  const deleteHandler = name =>{\n    if(window.confirm(`Delete ${name} ?`))\n      phoneBookService.deletePerson(id)\n      .then(returnStatus => returnStatus === 200 ?\n\tsetShouldReRender(!shouldReRender) : console.log('sth wrong') \n      )\n  }\n  return(\n          <>\n\t    {name} {phoneNum} <button \n            onClick={() => deleteHandler(name)}>{`delete`}</button>\n            <br/>\n          </>\n\t)\n}\n\nconst Filter = ({filterName, setFilterName}) => {\n  return(\n    <>\n      filter shown with: <input value={filterName} \n\tonChange={event => setFilterName(event.target.value)} />\n    </>\n  )\n}\n\nconst Persons = ({personsToShow, shouldReRender, setShouldReRender}) => {\n  return(\n      <div>\n      {personsToShow.map(person =>\n\t<Display key={person.name} person={person} \n\tshouldReRender={shouldReRender}\n\tsetShouldReRender={setShouldReRender}/>)\n      }\n      </div>\n  )\n}\n\nconst PersonForm = (props) => {\n  const {addPersonAndPhoneNum, newName, setNewName, newPhoneNum,\n      setNewPhoneNum} = props\n  return(\n      <form onSubmit={addPersonAndPhoneNum}>\n        <div>\n          name: <input value={newName} \n                onChange={event => setNewName(event.target.value)}/>\n          <br/>\n          number: <input value={newPhoneNum}\n                onChange={event => setNewPhoneNum(event.target.value)} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  )\n}\nconst Notification = ({message}) =>{\n  const NotificationStyle = {\n    color: 'green',\n    background: 'lightgrey',\n    fontSize: '20px',\n    fontStyle: 'italic'\n  }\n  if(message === null){\n    return null\n  }\n\n  return(\n    <div style={NotificationStyle}>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [shouldReRender, setShouldReRender] = useState(false)\n  const [newName, setNewName] = useState('')\n  const [newPhoneNum, setNewPhoneNum] = useState('')\n  const [filterName, setFilterName] = useState('')\n  const [addMessage, setAddMessage] = useState('')\n\n  useEffect(() =>{\n    phoneBookService \n      .getAll()\n      .then(initialPersons => {\n\tsetPersons(initialPersons)\n      })\n  }, [shouldReRender])\n\n  const addPersonAndPhoneNum = event =>{\n    event.preventDefault()\n    persons.forEach(element => { \n      if(element.name === newName && element.phoneNum === newPhoneNum)\n\talert(`${newName} & ${newPhoneNum} is already added to phonebook`)\n    }) \n    const newPerson = {\n      name: newName,\n      phoneNum: newPhoneNum\n    }\n    phoneBookService\n    .create(newPerson)\n    .then(newPerson =>{\n      setAddMessage(`Added ${newName}`)\n      setTimeout(() => setAddMessage(null), 3000)\n      setPersons(persons.concat(newPerson))\n      setNewName('')\n      setNewPhoneNum('')\n    })\n  }\n  const personsToShow = filterName === '' ? persons :\n    persons.filter( person => person.name === filterName )\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={addMessage} />\n      <Filter filterName={filterName} setFilterName={setFilterName} /> \n      <PersonForm addPersonAndPhoneNum={addPersonAndPhoneNum} \n      newName={newName} setNewName={setNewName} newPhoneNum={newPhoneNum}\n      setNewPhoneNum={setNewPhoneNum}\n      />\n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} \n      shouldReRender={shouldReRender} setShouldReRender={setShouldReRender} \n      />\n    </div>\n  )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}